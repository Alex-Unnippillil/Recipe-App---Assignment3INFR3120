<!-- views/recipe.ejs -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('partials/head'); %>
  </head>
  <body>
    <%- include('partials/header'); %>

    <main class="container my-5">
      <article class="col-lg-8 mx-auto">
        <h1 class="mb-3"><%= recipe.title %></h1>
        <p class="text-muted">
          <strong>Cooking time:</strong> <%= recipe.cookingTime %> minutes
        </p>

        <h4>Ingredients</h4>
        <p><%= recipe.ingredients %></p>

        <hr class="my-4" />

        <div class="d-flex gap-2 flex-wrap">
          <a href="/recipes/<%= recipe._id %>/edit" class="btn btn-primary">Edit</a>

          <!-- Delete uses POST with JavaScript confirm -->
          <% if (user) { %>
            <a href="/recipes/<%= recipe._id %>/edit" class="btn btn-primary me-2">Edit</a>

            <form action="/recipes/<%= recipe._id %>/delete"
                  method="POST"
                  class="d-inline"
                  onsubmit="return confirm('do you want to delete this recipe?');">
              <button type="submit" class="btn btn-danger">Delete</button>
            </form>
          <% } %>

          <a href="/recipes/list" class="btn btn-outline-secondary">Back to all recipes</a>

        </div>
      </article>
    </main>

    <%- include('partials/footer'); %>
  </body>
</html>
